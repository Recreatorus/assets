var gsap,_coreInitted,_parseEase,_toArray,_power3,_config,_getUnit,PropTween,_getCache,_checkPointRatio,_clamp,_processingVars,_getTracker=VelocityTracker.getByTarget,_getGSAP=function(){return gsap||"undefined"!=typeof window&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap},_isString=function(e){return"string"==typeof e},_isNumber=function(e){return"number"==typeof e},_isObject=function(e){return"object"==typeof e},_isFunction=function(e){return"function"==typeof e},_bonusValidated=1,_isArray=Array.isArray,_emptyFunc=function(e){return e},_bigNum=1e10,_tinyNum=1/_bigNum,_checkPoint=.05,_round=function(e){return Math.round(1e4*e)/1e4},_extend=function(e,t,r){for(var i in t)i in e||i===r||(e[i]=t[i]);return e},_deepClone=function e(t){var r,i,n={};for(r in t)n[r]=_isObject(i=t[r])?e(i):i;return n},_getClosest=function(e,t,r,i,n){var a,o,s,c,u=t.length,_=0,g=_bigNum;if(_isObject(e)){for(;u--;){for(s in a=t[u],o=0,e)c=a[s]-e[s],o+=c*c;o<g&&(_=u,g=o)}if((n||_bigNum)<_bigNum&&n<Math.sqrt(g))return e}else for(;u--;)a=t[u],o=a-e,o<0&&(o=-o),o<g&&a>=i&&a<=r&&(_=u,g=o);return t[_]},_parseEnd=function(e,t,r,i,n,a){if("auto"===e.end)return e;var o,s,c=e.end;if(r=isNaN(r)?_bigNum:r,i=isNaN(i)?-_bigNum:i,_isObject(t)){if(o=t.calculated?t:(_isFunction(c)?c(t):_getClosest(t,c,r,i,a))||t,!t.calculated){for(s in o)t[s]=o[s];t.calculated=!0}o=o[n]}else o=_isFunction(c)?c(t):_isArray(c)?_getClosest(t,c,r,i,a):parseFloat(c);return o>r?o=r:o<i&&(o=i),{max:o,min:o,unitFactor:e.unitFactor}},_getNumOrDefault=function(e,t,r){return isNaN(e[t])?r:+e[t]},_calculateChange=function(e,t){return t*_checkPoint*e/_checkPointRatio},_calculateDuration=function(e,t,r){return Math.abs((t-e)*_checkPointRatio/r/_checkPoint)},_reservedProps={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},_processLinkedProps=function(e,t,r,i){if(t.linkedProps){var n,a,o,s,c,u,_=t.linkedProps.split(","),g={};for(n=0;n<_.length;n++)a=_[n],o=t[a],o&&(_isNumber(o.velocity)?s=o.velocity:(c=c||_getTracker(e),s=c&&c.isTracking(a)?c.get(a):0),u=Math.abs(s/_getNumOrDefault(o,"resistance",i)),g[a]=parseFloat(r(e,a))+_calculateChange(s,u));return g}},_calculateTweenDuration=function(e,t,r,i,n,a){if(void 0===r&&(r=10),void 0===i&&(i=.2),void 0===n&&(n=1),void 0===a&&(a=0),_isString(e)&&(e=_toArray(e)[0]),!e)return 0;var o,s,c,u,_,g,p,l,f,m,d=0,h=_bigNum,v=t.inertia||t,y=_getCache(e).get,k=_getNumOrDefault(v,"resistance",_config.resistance);for(o in m=_processLinkedProps(e,v,y,k),v)_reservedProps[o]||(s=v[o],_isObject(s)||(l=l||_getTracker(e),l&&l.isTracking(o)?s=_isNumber(s)?{velocity:s}:{velocity:l.get(o)}:(u=+s||0,c=Math.abs(u/k))),_isObject(s)&&(_isNumber(s.velocity)?u=s.velocity:(l=l||_getTracker(e),u=l&&l.isTracking(o)?l.get(o):0),c=_clamp(i,r,Math.abs(u/_getNumOrDefault(s,"resistance",k))),_=parseFloat(y(e,o))||0,g=_+_calculateChange(u,c),"end"in s&&(s=_parseEnd(s,m&&o in m?m:g,s.max,s.min,o,v.radius),a&&(_processingVars===t&&(_processingVars=v=_deepClone(t)),v[o]=_extend(s,v[o],"end"))),"max"in s&&g>+s.max+_tinyNum?(f=s.unitFactor||_config.unitFactors[o]||1,p=_>s.max&&s.min!==s.max||u*f>-15&&u*f<45?i+.1*(r-i):_calculateDuration(_,s.max,u),p+n<h&&(h=p+n)):"min"in s&&g<+s.min-_tinyNum&&(f=s.unitFactor||_config.unitFactors[o]||1,p=_<s.min&&s.min!==s.max||u*f>-45&&u*f<15?i+.1*(r-i):_calculateDuration(_,s.min,u),p+n<h&&(h=p+n)),p>d&&(d=p)),c>d&&(d=c));return d>h&&(d=h),d>r?r:d<i?i:d},_initCore=function(){gsap=_getGSAP(),gsap&&(_parseEase=gsap.parseEase,_toArray=gsap.utils.toArray,_getUnit=gsap.utils.getUnit,_getCache=gsap.core.getCache,_clamp=gsap.utils.clamp,_power3=_parseEase("power3"),_checkPointRatio=_power3(.05),PropTween=gsap.core.PropTween,gsap.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),_config=gsap.config(),gsap.registerPlugin(VelocityTracker),_coreInitted=1)};export var InertiaPlugin={version:"3.4.0",name:"inertia",register:function(e){gsap=e,_initCore()},init:function(e,t,r,i,n){_coreInitted||_initCore();var a=_getTracker(e);if("auto"===t){if(!a)return void console.warn("No inertia tracking on "+e+". InertiaPlugin.track(target) first.");t=a.getAll()}this.target=e,this.tween=r,_processingVars=t;var o,s,c,u,_,g,p,l,f,m=e._gsap,d=m.get,h=t.duration,v=_isObject(h),y=t.preventOvershoot||v&&0===h.overshoot,k=_getNumOrDefault(t,"resistance",_config.resistance),N=_isNumber(h)?h:_calculateTweenDuration(e,t,v&&h.max||10,v&&h.min||.2,v&&"overshoot"in h?+h.overshoot:y?0:1,!0);for(o in t=_processingVars,_processingVars=0,f=_processLinkedProps(e,t,d,k),t)_reservedProps[o]||(s=t[o],_isFunction(s)&&(s=s(i,e,n)),_isNumber(s)?_=s:_isObject(s)&&!isNaN(s.velocity)?_=+s.velocity:a&&a.isTracking(o)?_=a.get(o):console.warn("ERROR: No velocity was defined for "+e+" property: "+o),g=_calculateChange(_,N),l=0,c=d(e,o),u=_getUnit(c),c=parseFloat(c),_isObject(s)&&(p=c+g,"end"in s&&(s=_parseEnd(s,f&&o in f?f:p,s.max,s.min,o,t.radius)),"max"in s&&+s.max<p?y||s.preventOvershoot?g=s.max-c:l=s.max-c-g:"min"in s&&+s.min>p&&(y||s.preventOvershoot?g=s.min-c:l=s.min-c-g)),this._props.push(o),this._pt=new PropTween(this._pt,e,o,c,0,_emptyFunc,0,m.set(e,o,this)),this._pt.u=u||0,this._pt.c1=g,this._pt.c2=l);return r.duration(N),_bonusValidated},render:function(e,t){var r=t._pt;for(e=_power3(t.tween._time/t.tween._dur);r;)r.set(r.t,r.p,_round(r.s+r.c1*e+r.c2*e*e)+r.u,r.d,e),r=r._next}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(e){return InertiaPlugin[e]=VelocityTracker[e]}),_getGSAP()&&gsap.registerPlugin(InertiaPlugin);export{InertiaPlugin as default,VelocityTracker};